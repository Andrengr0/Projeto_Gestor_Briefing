<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Briefing - HomePage</title>
    <link rel="stylesheet" href="/public/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
</head>
<body class="body-painel">
    <header class="header-painel">
        <div class="container">
            <div class="logo">
                <img src="/public/images/img_logo_BriefMaster.png">
            </div><!-- logo -->

            <div class="user">
                <h6><i class="fa fa-user" aria-hidden="true"></i>&nbsp;<%= nomeUsuario %> &nbsp;&nbsp; <a href="admin/logout">Sair</a></h6>
            </div><!-- user -->
        </div><!-- container -->
    </header>

    <div class="content">
        <div class="container">

            <aside>
                <nav>
					<ul>
						<li><a class="option-menu-single" href="/painel/projetos"><span><i class="fa fa-home" aria-hidden="true"></i></span>Projetos</a></li>
						<li><a class="option-menu-single" href="/painel/dados-pessoais"><span><i class="fa fa-id-card-o" aria-hidden="true"></i></span>Dados Pessoais</a></li>
					</ul>
				</nav>
            </aside>
        
            <main>
                <div class="container-main">
                    <h4>Briefing Cadastrados:</h4>
                    <button class="btn-cadastrar-briefing" type="button" data-toggle="modal" data-target="#cadastro_briefing"><img src="/public/images/img_icon_adicionar.png"><span>Cadastrar Briefing</span></button>

                    <div class="box-filtros row mt-3">
                        <div class="filtro-single col-lg-4">
                            <span>Filtrar por estado:</span>
                            <select name="filtroStatus" id="filtro_status">
                                <option value="" selected>Todos</option>
                                <option value="Negociação">Negociação</option>
                                <option value="Aprovado">Aprovado</option>
                                <option value="Finalizado">Finalizado</option>
                            </select><!-- filtro_status -->
                        </div><!-- filtro-single -->

                        <div class="filtro-single col-lg-8">
                            <div class="form-busca">
                                <form action="/">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                    <input name="buscar-briefing" id="buscar-briefing" type="text" placeholder="Busque por título do projeto" />
                                </form>
                            </div><!--formbusca-->
            
                        </div><!-- filtro-single -->
                    </div><!-- box-filtros -->

                    <div class="card-briefing-header row mt-5">
                        <h6 class="nome col-lg-5 py-1 ml-3">Projeto:</h6>
                        <h6 class="status col-lg-2 py-1 text-center">Estado:</h6>
                    </div><!-- card-single-header -->

                    <div id="box-card-briefing" class="box-card-briefing">
                    
                    </div><!-- box-card-briefing -->
                </div><!-- container-main -->
            </main>
        </div><!-- container -->

  
  <!-- Modal para cadastro de Briefing -->
  <div class="modal fade" id="cadastro_briefing" tabindex="-1" role="dialog" aria-labelledby="CadastroBriefing" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="TituloModalLongoExemplo">Cadastrar novo briefing</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

            <form id="form-briefing" enctype="multipart/form-data" method="post">

                <label for="nome_cliente">Informe o nome do cliente:</label>
                <input type="text" name="nome_cliente" id="nome_cliente" placeholder="Ex.: VivaMoveis...">
                
                <label for="titulo" class="mt-4">Informe um título para o projeto:</label>
                <input type="text" name="titulo" id="titulo" placeholder="Ex.: Site para loja VivaMoveis...">

                <label for="descricao" class="mt-4">Informe uma descrição do projeto:</label>
                <textarea id="descricao" name="descricao" placeholder="Ex.: Descreva aqui o projeto.."></textarea>

                <label for="estado_briefing" class="mt-4">Defina o estado do projeto:</label>
                <select name="estado_briefing" id="estado_briefing">
                    <option value="Negociação">Negociação</option>
                    <option value="Aprovado">Aprovado</option>
                    <option value="Finalizado">Finalizado</option>
                </select>
            </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="cadastrar_briefing">Cadastrar Briefing</button>
        </div>
      </div>
    </div>
  </div> <!-- Fim do modal -->



  <!-- Modal para alteração de Briefing -->
  <% for(let i=0; i < briefings.length; i++) {%>
  <div class="modal fade" id="briefing_<%=briefings[i].idBriefing%>" tabindex="-1" role="dialog" aria-labelledby="AlterarBriefing" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="TituloModal">Alterar briefing</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

            <form id="form-briefing-<%=briefings[i].idBriefing%>" enctype="multipart/form-data" method="post">

                <label for="nome_cliente">Nome do cliente:</label>
                <input type="text" name="nome_cliente" id="nome_cliente" placeholder="Ex.: VivaMoveis..." value="<%=briefings[i].nomeCliente%>">
                
                <label for="titulo" class="mt-4">Título do projeto:</label>
                <input type="text" name="titulo" id="titulo" placeholder="Ex.: Site para loja VivaMoveis..." value="<%=briefings[i].titulo%>">

                <label for="descricao" class="mt-4">Descrição do projeto:</label>
                <textarea id="descricao" name="descricao" placeholder="Ex.: Descreva aqui o projeto.."><%=briefings[i].descricao%></textarea>

                <label for="estado_briefing" class="mt-4">Estado do projeto:</label>

                
                <select name="estado_briefing" id="estado_briefing">
                    <% if(briefings[i].estado == "Negociação"){%>
                        <option selected value="Negociação">Negociação</option>
                        <option value="Aprovado">Aprovado</option>
                        <option value="Finalizado">Finalizado</option>
                    <%} else if(briefings[i].estado == "Aprovado"){%>
                        <option value="Negociação">Negociação</option>
                        <option selected value="Aprovado">Aprovado</option>
                        <option value="Finalizado">Finalizado</option>
                    <% } else {%>
                        <option value="Negociação">Negociação</option>
                        <option value="Aprovado">Aprovado</option>
                        <option selected value="Finalizado">Finalizado</option>
                    <% } %>
                </select>

            </form>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary alterar-briefing" data-id="<%=briefings[i].idBriefing%>">Alterar Briefing</button>
        </div>
      </div>
    </div>
  </div> <!-- Fim do modal -->
  <% } %>
    </div><!-- content -->
    
    


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.0/dist/js/bootstrap.min.js"></script>
    <script src="/public/js/cadastro_briefing.js"></script>
    <script src="/public/js/alterar_filtrar_obter-briefing.js"></script>
    <script src="/public/js/buscar_briefing.js"></script>
    <script src="/public/js/modal_excluir_briefing.js"></script>
    <script src="/public/js/transition_menu_admin.js"></script>
</body>
</html>